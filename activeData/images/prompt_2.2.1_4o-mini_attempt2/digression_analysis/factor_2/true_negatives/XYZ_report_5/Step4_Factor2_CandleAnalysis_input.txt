System Prompt:
<Task Instructions>
You are a financial expert responsible for evaluating how a stock's technical chart, specifically candlestick patterns and volume trends, will influence the likelihood of a price increase following the release of an upcoming earnings report. Your task is to analyze the stock's short-term technical setup and estimate the probability of the stock price going up immediately after the earnings announcement.
</Task Instructions>

<Analysis Methodology>
Use the context given in <context> and the following technical analysis elements to evaluate the stock's condition:

1. Trend Determination
   - Identify whether the stock is in a short-term uptrend or downtrend.
   - Uptrend is indicated when short-term moving averages (e.g., 5-day, 10-day) are positioned above long-term averages (e.g., 60-day, 120-day).
   - Downtrend is indicated when the reverse is true.
   - Also consider recent candlestick behavior for trend confirmation.

2. Volume Trend
   - Analyze trading volume patterns.
   - If short-term average volume (e.g., 5-day, 10-day) exceeds long-term averages (e.g., 60-day, 120-day), it may indicate increased market participation and a higher prossibility of the price going up.
   - Decreasing volume may suggest reduced market interest and a lower chance of the price going up.

3. Candlestick Patterns
   - Identify any key short-term candlestick formations (e.g., Inside Day, Doji, Bullish Engulfing, Bearish Reversal).
   - For example, an Inside Day pattern on low volume suggests market indecision, and the price may go highly up or highly down after the release of new earnings report. But this indicator doesn't tell you directly which direction it will move, please refer to the other indicators to decided the direction.

4. Volatility Setup
   - Assess whether the current price structure suggests compression (low volatility) or expansion (high volatility).
   - If at high volatility stage, it is more uncertained whether the price will move up or down so your prediction of probability shouldn't be too high or low.

5. Discretionary Technical Judgment
   - Beyond the specific examples above, use your expert-level knowledge in technical analysis to evaluate the chart.
   - If a breakout is forming, or resistance/support levels are about to be tested, incorporate these insights into your probability judgment.

Combine these technical factors to make a reasoned estimate of how likely the stock is to rise post-earnings.
Probability 0.5 means either you can't judge from the given <context>, or all the above signals are fully contradictory.
Probability 1.0 means all the above signals show strong positive sign.
Probability 0.0 means all the above signals show strong negative sign.
</Analysis Methodology>

<Output Instruction>
Output the result in the following format:
Factor(up_probability = ..., reason = "...")

Where:
- up_probability is a float between 0.0 and 1.0 (e.g. 0.70 means 70% chance of rising)
- reason should summarize the technical reasoning supporting your probability estimate
</Output Instruction>

<Remarks>
- Use only the data provided in <context>.
- Do not predict the quality of earningsâ€”only how the chart suggests the market is positioned to react
- If all signals are inconclusive, set up_probability to 0.5
- Be specific in identifying chart patterns, volume shifts, and moving average behavior
- Clearly explain how the technical setup supports your directional probability estimate
</Remarks>

User Prompt:
<context>
The company name is Block Inc. Class A Common Stock.
The company's symbol is XYZ

The company's candlestick chart including the volume is
          date       open        low       high      close    volume  daily_volatility_percentage  20_days_moving_average_of_close_price  60_days_moving_average_of_close_price  20_days_moving_average_of_volume  60_days_moving_average_of_volume  pe_ratio_transition
0   2024-11-01  72.230003  71.750000  73.112999  72.150002   5643100                     1.889118                              71.800000                              67.325667                         4937220.0                      5.281292e+06                  NaN
1   2024-11-04  72.199997  72.040001  73.709999  72.690002   4577200                     2.297425                              72.149001                              67.501500                         4962240.0                      5.258562e+06                  NaN
2   2024-11-05  71.629997  71.629997  72.894997  72.379997   5489700                     1.747720                              72.355500                              67.689667                         4969890.0                      5.254287e+06                  NaN
3   2024-11-06  74.970001  74.160004  78.099998  77.639999  10380800                     5.074697                              72.824001                              67.927500                         5259210.0                      5.345842e+06                  NaN
4   2024-11-07  77.410004  74.934998  78.080002  75.269997  19111800                     4.178297                              73.086501                              68.145333                         5797425.0                      5.579947e+06                  NaN
5   2024-11-08  71.889999  69.029999  74.820000  74.559998  24843700                     7.765559                              73.329501                              68.317167                         6734680.0                      5.878267e+06                  NaN
6   2024-11-11  75.900002  75.800003  83.949997  83.400002  20910700                     9.772175                              73.917001                              68.609333                         7432430.0                      6.135337e+06                  NaN
7   2024-11-12  82.660004  82.389999  87.410004  87.250000  15209300                     5.753587                              74.690001                              68.948833                         7919610.0                      6.314583e+06                  NaN
8   2024-11-13  86.300003  85.252998  90.000000  85.820000  12982400                     5.531347                              75.304501                              69.297833                         8304125.0                      6.449175e+06                  NaN
9   2024-11-14  85.370003  82.919998  85.949997  83.419998   9206300                     3.632221                              75.791500                              69.594000                         8521390.0                      6.508077e+06                  NaN
10  2024-11-15  82.550003  81.839996  84.519997  84.300003   6915200                     3.179122                              76.273500                              69.935000                         8652480.0                      6.543875e+06                  NaN
11  2024-11-18  83.760002  83.360001  91.830002  90.790001  16671500                     9.329223                              77.117500                              70.358833                         9274055.0                      6.728092e+06                  NaN
12  2024-11-19  90.000000  89.790001  93.000000  92.419998  13334200                     3.473273                              78.097500                              70.806500                         9705540.0                      6.877410e+06                  NaN
13  2024-11-20  92.000000  89.471001  93.000000  89.699997   7897400                     3.934225                              79.013000                              71.190833                         9864255.0                      6.948307e+06                  NaN
14  2024-11-21  90.735001  89.624001  93.959999  92.699997  14160500                     4.677453                              80.020500                              71.657833                        10421970.0                      7.099382e+06                  NaN
15  2024-11-22  92.610001  91.815002  94.120003  92.260002   9117000                     2.498374                              81.003000                              72.088500                        10679610.0                      7.130768e+06                  NaN
16  2024-11-25  92.500000  89.269997  92.510002  90.750000  11126900                     3.570254                              81.816500                              72.499667                        11030725.0                      7.218705e+06                  NaN
17  2024-11-26  89.834999  88.580002  90.720001  89.010002   7855300                     2.404224                              82.606000                              72.913667                        11198425.0                      7.273243e+06                  NaN
18  2024-11-27  89.430000  88.199997  90.650002  88.779999   6646100                     2.759636                              83.380500                              73.325333                        11322635.0                      7.316497e+06                  NaN
19  2024-11-29  89.410004  88.459999  90.075996  88.550003   4527400                     1.824955                              84.192000                              73.724833                        11330325.0                      7.330465e+06                  NaN
20  2024-12-02  92.440002  92.000000  95.949997  92.779999  14027800                     4.257380                              85.223500                              74.250500                        11749560.0                      7.456787e+06                  NaN
21  2024-12-03  91.849998  90.760002  93.779999  93.199997   8252700                     3.240340                              86.248999                              74.782000                        11933335.0                      7.502080e+06                  NaN
22  2024-12-04  95.150002  94.300003  98.949997  98.919998  12564100                     4.700762                              87.575999                              75.407833                        12287055.0                      7.590155e+06                  NaN
23  2024-12-05  99.114998  95.547997  99.260002  95.870003   9374200                     3.871916                              88.487500                              75.949333                        12236725.0                      7.649165e+06                  NaN
24  2024-12-06  97.480003  96.040001  98.819000  98.250000   9410700                     2.828498                              89.636500                              76.525666                        11751670.0                      7.742985e+06                  NaN
25  2024-12-09  97.290001  94.400002  98.050003  95.419998   8420300                     3.825196                              90.679500                              77.049500                        10930500.0                      7.805275e+06                  NaN
26  2024-12-10  96.879997  93.800003  97.040001  94.040001   6371800                     3.445340                              91.211500                              77.520500                        10203555.0                      7.820998e+06                  NaN
27  2024-12-11  95.754997  95.510002  98.989998  98.190002   7707300                     3.544145                              91.758500                              78.034833                         9828455.0                      7.874408e+06                  NaN
28  2024-12-12  96.419998  93.959999  96.980003  94.110001   9777400                     3.209015                              92.173000                              78.491000                         9668205.0                      7.944113e+06                  NaN
29  2024-12-13  94.620003  91.910004  95.389999  91.980003   8351600                     3.783426                              92.601000                              78.880000                         9625470.0                      7.974177e+06                  NaN
30  2024-12-16  92.720001  91.550003  94.620003  93.779999   6678700                     3.273619                              93.075000                              79.318667                         9613645.0                      7.956408e+06                  NaN
31  2024-12-17  93.589996  93.150002  95.589996  94.550003   6004300                     2.580640                              93.263000                              79.764000                         9080285.0                      7.968318e+06                  NaN
32  2024-12-18  94.260002  87.190002  95.779999  87.300003  11011200                     9.839629                              93.007000                              80.093333                         8964135.0                      8.045595e+06                  NaN
33  2024-12-19  90.080002  87.300003  91.809998  87.639999   8398200                     5.146046                              92.904000                              80.466667                         8989175.0                      8.089193e+06                  NaN
34  2024-12-20  86.839996  86.202003  90.779999  89.650002   8834300                     5.106520                              92.751501                              80.852167                         8722865.0                      8.138065e+06                  NaN
35  2024-12-23  89.480003  87.660004  89.839996  89.290001   4208500                     2.441475                              92.603001                              81.224167                         8477440.0                      8.086078e+06                  NaN
36  2024-12-24  89.629997  88.879997  91.139999  91.080002   2197700                     2.481337                              92.619501                              81.623333                         8030980.0                      8.034345e+06                  NaN
37  2024-12-26  90.500000  90.289001  91.629997  91.480003   2991100                     1.465890                              92.743001                              82.049000                         7787770.0                      7.974208e+06                  NaN
38  2024-12-27  91.000000  88.050003  91.290001  88.970001   4140800                     3.641675                              92.752501                              82.447500                         7662505.0                      7.955462e+06                  NaN
39  2024-12-30  88.404999  86.830002  88.690002  87.480003   5383800                     2.126201                              92.699001                              82.811500                         7705325.0                      7.972757e+06                  NaN
40  2024-12-31  87.720001  84.820000  88.000000  84.989998   4989400                     3.741617                              92.309501                              83.111000                         7253405.0                      7.980062e+06                  NaN
41  2025-01-02  86.150002  84.843002  87.550003  86.750000   5695400                     3.120462                              91.987001                              83.461667                         7125540.0                      8.007038e+06                  NaN
42  2025-01-03  90.644997  89.230003  92.650002  92.160004  10633400                     3.710935                              91.649001                              83.860167                         7029005.0                      8.095317e+06                  NaN
43  2025-01-06  93.629997  91.220001  93.830002  91.940002   6464800                     2.838809                              91.452501                              84.254667                         6883535.0                      8.126490e+06                  NaN
44  2025-01-07  92.360001  86.820000  93.580002  87.680000   6851700                     7.709856                              90.924001                              84.549001                         6755585.0                      8.101560e+06                  NaN
45  2025-01-08  87.525002  85.690002  88.378998  86.750000   5932700                     3.099706                              90.490501                              84.833167                         6631205.0                      8.098795e+06                  NaN
46  2025-01-10  84.970001  81.650002  84.970001  82.540001   8229700                     4.022292                              89.915501                              85.014667                         6724100.0                      8.120028e+06                  NaN
47  2025-01-13  80.720001  80.199997  82.190002  82.010002   6934300                     2.426540                              89.106501                              85.185001                         6685450.0                      8.144505e+06                  NaN
48  2025-01-14  83.029999  81.650002  84.279999  82.419998   5221800                     3.190970                              88.522001                              85.333167                         6457670.0                      8.143333e+06                  NaN
49  2025-01-15  86.120003  84.320999  86.800003  84.790001   6120500                     2.923698                              88.162501                              85.518334                         6346115.0                      8.164325e+06                  NaN
50  2025-01-16  85.099998  84.900002  87.220001  86.379997   6124800                     2.685807                              87.792501                              85.713667                         6318420.0                      8.194848e+06                  NaN
51  2025-01-17  87.000000  86.099998  88.150002  86.959999   5797000                     2.357409                              87.413001                              85.931167                         6308055.0                      8.220798e+06                  NaN
52  2025-01-21  88.059998  87.629997  89.839996  89.500000   4269100                     2.469273                              87.523001                              86.209167                         5970950.0                      8.213542e+06                  NaN
53  2025-01-22  90.199997  87.279999  90.559998  87.480003   6010000                     3.749427                              87.515001                              86.477334                         5851540.0                      8.234990e+06                  NaN
54  2025-01-23  87.110001  86.470001  88.559998  87.800003   4899200                     2.380406                              87.422501                              86.731500                         5654785.0                      8.266540e+06                  NaN
55  2025-01-24  88.555000  88.059998  89.989998  88.669998   5330000                     2.176610                              87.391501                              86.999167                         5710860.0                      8.289303e+06                  NaN
56  2025-01-27  84.510002  84.250000  87.430000  85.010002   6136300                     3.740737                              87.088001                              87.174667                         5907790.0                      8.323165e+06                  NaN
57  2025-01-28  85.480003  84.360001  88.709999  88.639999   4797100                     4.907489                              86.946001                              87.431667                         5998090.0                      8.328095e+06                  NaN
58  2025-01-29  88.364998  87.959999  90.769997  90.029999   4662100                     3.121179                              86.999001                              87.710667                         6024155.0                      8.336432e+06                  NaN
59  2025-01-30  91.589996  91.110001  94.250000  92.949997   5828400                     3.378160                              87.272500                              88.054500                         6046385.0                      8.360678e+06                  NaN
60  2025-01-31  93.349998  90.309998  93.750000  90.820000   6826200                     3.787715                              87.564000                              88.365667                         6138225.0                      8.380397e+06                  NaN
61  2025-02-03  88.639999  87.709999  91.290001  90.199997   4760200                     3.968960                              87.736500                              88.657500                         6091465.0                      8.383447e+06                  NaN
62  2025-02-04  90.199997  85.889999  90.230003  86.169998   5698200                     5.036560                              87.437000                              88.887334                         5844705.0                      8.386922e+06                  NaN
63  2025-02-05  87.389999  85.379997  87.815002  86.000000   4632700                     2.831401                              87.140000                              89.026667                         5753100.0                      8.291120e+06                  NaN
64  2025-02-06  87.650002  85.220001  88.129997  86.080002   4908600                     3.380572                              87.060000                              89.206834                         5655945.0                      8.054400e+06                  NaN
65  2025-02-07  87.629997  84.949997  88.730003  85.320000   4741000                     4.430387                              86.988500                              89.386167                         5596360.0                      7.719355e+06                  NaN
66  2025-02-10  86.440002  84.260002  86.779999  84.849998   3980400                     2.969943                              87.104000                              89.410334                         5383895.0                      7.437183e+06                  NaN
67  2025-02-11  84.900002  82.339996  85.328003  82.589996   3988800                     3.617880                              87.132999                              89.332667                         5236620.0                      7.250175e+06                  NaN
68  2025-02-12  81.250000  81.099998  83.059998  82.989998   4284300                     2.361729                              87.161499                              89.285500                         5189745.0                      7.105207e+06                  NaN
69  2025-02-13  83.889999  82.449997  85.089996  84.290001   4552400                     3.132043                              87.136499                              89.300000                         5111340.0                      7.027642e+06                  NaN
70  2025-02-14  84.180000  82.230003  84.529999  84.000000   5658300                     2.738090                              87.017500                              89.295000                         5088015.0                      7.006693e+06                  NaN
71  2025-02-18  84.555000  83.199997  85.150002  84.180000   6129000                     2.316470                              86.878500                              89.184834                         5104615.0                      6.830985e+06                  NaN
72  2025-02-19  83.449997  82.550003  84.519997  83.889999   7185300                     2.348306                              86.598000                              89.042667                         5250425.0                      6.728503e+06                  NaN
73  2025-02-20  84.339996  81.699997  85.550003  83.040001  12435300                     4.636327                              86.375999                              88.931667                         5571690.0                      6.804135e+06                  NaN
74  2025-02-21  74.970001  67.430000  76.500000  68.349998  36825100                    13.269934                              85.403499                              88.525834                         7167985.0                      7.181878e+06                  NaN
75  2025-02-24  68.010002  65.019997  68.730003  65.919998  17087400                     5.628044                              84.265999                              88.086834                         7755855.0                      7.314718e+06                  NaN
76  2025-02-25  66.220001  62.599998  66.400002  62.840000  18883300                     6.047109                              83.157499                              87.621667                         8393205.0                      7.443992e+06                  NaN
77  2025-02-26  63.450001  63.250000  65.610001  65.290001  19614300                     3.614643                              81.989999                              87.226334                         9134065.0                      7.639975e+06                  NaN
78  2025-02-27  65.010002  63.910000  66.760002  64.279999  12273300                     4.433731                              80.702499                              86.818000                         9514625.0                      7.733762e+06                  NaN
79  2025-02-28  63.869999  63.110001  65.410004  65.300003   7843600                     3.522210                              79.320000                              86.430500                         9615385.0                      7.789032e+06                  NaN
80  2025-03-03  65.750000  62.310001  66.900002  62.790001  10062500                     7.310081                              77.918500                              85.930667                         9777200.0                      7.722943e+06                  NaN
81  2025-03-04  60.389999  57.900002  61.139999  59.430000  15104800                     5.451788                              76.380000                              85.367834                        10294430.0                      7.837145e+06                  NaN
82  2025-03-05  59.799999  59.430000  61.650002  61.119999   9759100                     3.632201                              75.127500                              84.737834                        10497475.0                      7.790395e+06                  NaN
83  2025-03-06  59.049999  58.674000  60.965000  59.799999  10868900                     3.831104                              73.817500                              84.136667                        10809285.0                      7.815307e+06                  NaN
84  2025-03-07  59.805000  57.610001  61.020000  60.000000  10863900                     5.683333                              72.513500                              83.499167                        11107050.0                      7.839527e+06                  NaN
85  2025-03-10  58.139999  53.540001  58.419998  54.740002  15663200                     8.914865                              70.984500                              82.821167                        11653160.0                      7.960242e+06                  NaN
86  2025-03-11  54.759998  53.950001  56.139999  55.290001  11440000                     3.960931                              69.506500                              82.175334                        12026140.0                      8.044712e+06                  NaN
87  2025-03-12  56.380001  55.209999  56.745998  55.900002   9003700                     2.747763                              68.172000                              81.470500                        12276885.0                      8.066318e+06                  NaN
88  2025-03-13  55.340000  53.880001  55.709999  54.040001   8632500                     3.386377                              66.724500                              80.802667                        12494295.0                      8.047237e+06                  NaN
89  2025-03-14  55.500000  55.347000  57.521000  57.220001   8942300                     3.799370                              65.371000                              80.223334                        12713790.0                      8.057082e+06                  NaN
90  2025-03-17  56.650002  56.650002  59.435001  58.650002   7701800                     4.748508                              64.103500                              79.637834                        12815965.0                      8.074133e+06                  NaN
91  2025-03-18  59.900002  58.779999  60.090000  59.650002   8248600                     2.196146                              62.877000                              79.056167                        12921945.0                      8.111538e+06                  NaN
92  2025-03-19  60.455002  59.599998  62.430000  61.369999   8622500                     4.611377                              61.751000                              78.624000                        12993805.0                      8.071727e+06                  NaN
93  2025-03-20  60.570000  60.439999  62.380001  61.000000   6344100                     3.180332                              60.649000                              78.180000                        12689245.0                      8.037492e+06                  NaN
94  2025-03-21  60.349998  59.599998  61.580002  61.110001  11395600                     3.240064                              60.287000                              77.704334                        11417770.0                      8.080180e+06                  NaN
95  2025-03-24  62.380001  62.000000  63.180000  62.580002   9048800                     1.885587                              60.120001                              77.259167                        11015840.0                      8.160852e+06                  NaN
96  2025-03-25  62.764999  61.209999  63.689999  61.330002   7366100                     4.043697                              60.044501                              76.763334                        10439980.0                      8.246992e+06                  NaN
97  2025-03-26  60.889999  58.799999  61.360001  59.049999   8947800                     4.335311                              59.732501                              76.222834                         9906655.0                      8.346270e+06                  NaN
98  2025-03-27  58.759998  56.880001  58.900002  56.990002   7927100                     3.544482                              59.368001                              75.689834                         9689345.0                      8.409375e+06                  NaN
99  2025-03-28  56.540001  54.689999  57.000000  55.330002  10692000                     4.174953                              58.869501                              75.154000                         9831765.0                      8.497845e+06                  NaN
100 2025-03-31  53.889999  52.250000  54.689999  54.330002   8163700                     4.491070                              58.446501                              74.643000                         9736825.0                      8.550750e+06                  NaN
101 2025-04-01  53.889999  53.770000  55.520000  55.410000   7649900                     3.158275                              58.245501                              74.120667                         9364080.0                      8.583325e+06                  NaN
102 2025-04-02  54.000000  53.903000  58.709999  57.860001   9187900                     8.307983                              58.082501                              73.549000                         9335520.0                      8.559233e+06                  NaN
103 2025-04-03  54.740002  52.470001  55.441002  53.970001  13288100                     5.504911                              57.791001                              72.916167                         9456480.0                      8.672955e+06                  NaN
104 2025-04-04  50.310001  47.689999  51.880001  50.259998  15195700                     8.336655                              57.304001                              72.292500                         9673070.0                      8.812022e+06                  NaN
105 2025-04-07  47.049999  46.419998  53.450001  50.470001  13017700                    13.929072                              57.090501                              71.687833                         9540795.0                      8.930105e+06                  NaN
106 2025-04-08  52.930000  48.130001  53.339001  49.080002   9909700                    10.613283                              56.780001                              71.130167                         9464280.0                      8.958105e+06                  NaN
107 2025-04-09  49.049999  47.950001  56.770000  55.990002  12475700                    15.752812                              56.784501                              70.696500                         9637880.0                      9.050462e+06                  NaN
108 2025-04-10  54.340000  50.930000  54.880001  52.910000   9574000                     7.465509                              56.728001                              70.204667                         9684955.0                      9.122998e+06                  NaN
109 2025-04-11  52.860001  51.000000  54.150002  53.939999   8623100                     5.839825                              56.564001                              69.690500                         9668995.0                      9.164708e+06                  NaN
110 2025-04-14  55.310001  53.639999  55.700001  54.660000   7027200                     3.768755                              56.364501                              69.161834                         9635265.0                      9.179748e+06                  NaN
111 2025-04-15  54.820000  54.580002  55.900002  55.080002   4012900                     2.396514                              56.136001                              68.630500                         9423480.0                      9.150013e+06                  NaN
112 2025-04-16  54.200001  52.770000  55.500000  53.750000   6318000                     5.079069                              55.755001                              68.034667                         9308255.0                      9.184162e+06                  NaN
113 2025-04-17  53.650002  53.029999  54.417999  53.900002   4510000                     2.575140                              55.400001                              67.475000                         9216550.0                      9.159162e+06                  NaN
114 2025-04-21  52.919998  51.398998  53.450001  52.389999   5836800                     3.914874                              54.964001                              66.884833                         8938610.0                      9.174788e+06                  NaN
115 2025-04-22  53.020000  52.994999  54.830002  54.330002   6058800                     3.377513                              54.551501                              66.312500                         8789110.0                      9.186935e+06                  NaN
116 2025-04-23  56.900002  55.220001  58.750000  55.660000   8388800                     6.342075                              54.268001                              65.823333                         8840245.0                      9.224477e+06                  NaN
117 2025-04-24  55.790001  55.180000  57.520000  57.500000   6468800                     4.069565                              54.190501                              65.304333                         8716295.0                      9.252338e+06                  NaN
118 2025-04-25  57.669998  57.220001  58.270000  58.090000   5625900                     1.807539                              54.245501                              64.772000                         8601235.0                      9.268402e+06                  NaN
119 2025-04-28  58.549999  57.520000  59.270000  58.320000   4578700                     3.000686                              54.395000                              64.194834                         8295570.0                      9.247573e+06                  NaN
120 2025-04-29  58.740002  58.500000  59.820000  59.560001   4547700                     2.216252                              54.656500                              63.673834                         8114770.0                      9.209598e+06                  NaN
121 2025-04-30  57.020000  56.414001  58.700001  58.470001   6625500                     3.909696                              54.809501                              63.145000                         8063550.0                      9.240687e+06                  NaN
</context>
